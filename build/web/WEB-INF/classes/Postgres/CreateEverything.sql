CREATE TABLE ADMINISTRATOR(
  USERNAME VARCHAR (1000)
);

CREATE TABLE CATEGORY(
  CATEGORYID SERIAL NOT NULL,
  NAME VARCHAR(256) NOT NULL,
  TIMECREATED TIMESTAMP,
  PRIMARY KEY (CATEGORYID)
);

INSERT INTO CATEGORY VALUES (DEFAULT, 'Debate', NULL);
INSERT INTO CATEGORY VALUES (DEFAULT, 'Finance', NULL);
INSERT INTO CATEGORY VALUES (DEFAULT, 'Technology', NULL);
INSERT INTO CATEGORY VALUES (DEFAULT, 'Off-topic', NULL);

CREATE TABLE PROFILE(
  USERID SERIAL NOT NULL,
  USERNAME VARCHAR(256) NOT NULL,
  PASSWORD VARCHAR(1000),
  EMAIL VARCHAR(1000) NOT NULL,
  DATECREATED DATE NOT NULL,
  LASTLOGIN DATE NOT NULL,
  AVATAR BYTEA,
  PRIMARY KEY (USERID)
);

CREATE TABLE TOPIC(
  TOPICID SERIAL NOT NULL,
  CATEGORYID INTEGER NOT NULL REFERENCES CATEGORY(CATEGORYID),
  CONTENT VARCHAR(5000) NOT NULL,
  USERID INTEGER NOT NULL REFERENCES PROFILE(USERID),
  DATECREATED DATE NOT NULL,
  TIMECREATED TIMESTAMP,
  DATEUPDATED DATE NOT NULL,
  TIMEUPDATED TIMESTAMP,
  CUSTOM VARCHAR(10000),
  PRIMARY KEY (TOPICID)
);

CREATE TABLE POST(
  POSTID SERIAL NOT NULL,
  USERID INTEGER NOT NULL REFERENCES PROFILE(USERID),
  CONTENT VARCHAR(5000) NOT NULL,
  PARENTID INTEGER DEFAULT 0,
  TOPICID INTEGER NOT NULL REFERENCES TOPIC(TOPICID),
  DATECREATED DATE NOT NULL,
  TIMECREATED TIMESTAMP,
  UPVOTES INTEGER DEFAULT 0,
  DOWNVOTES INTEGER DEFAULT 0,
  CUSTOM VARCHAR(10000),
  DELETED BOOLEAN DEFAULT FALSE,
  PRIMARY KEY (POSTID)
);

CREATE TABLE RATING_ASSOC(
  ID SERIAL NOT NULL,
  USERID INTEGER NOT NULL REFERENCES PROFILE(USERID),
  POSTID INTEGER NOT NULL REFERENCES POST(POSTID),
  UPVOTE BOOLEAN NOT NULL,
  UNIQUE(USERID, POSTID)
);